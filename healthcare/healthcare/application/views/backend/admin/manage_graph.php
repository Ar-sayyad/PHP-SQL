<?php $city_info = $this->db->get('city')->result_array(); $speciality_info = $this->db->get('speciality')->result_array(); ?><form method="post" action="<?php echo base_url();?>index.php?admin/graph"><div class="form-group"><input type="hidden" name="chart_type" value="<?php if(!empty($chart_type)){ echo $chart_type;} else {}?>"/> <input type="hidden" name="speciality_id" value="<?php if(!empty($speciality_id)){ echo $speciality_id;} else {}?>"/>                                                    <div class="col-sm-4">                                <select name="city_id" id="city_id" onchange='if(this.value != 0) { this.form.submit(); }' class="form-control select2">                                    <option value=""><?php echo get_phrase('select_city'); ?></option>                                    <?php foreach ($city_info as $row2) { ?>                                        <option value="<?php echo $row2['city_id']; ?>" <?php if(!empty($city_id) && ($row2['city_id']== $city_id)) { echo 'selected';}else{}?> >                                            <?php echo $row2['name']; ?>                                        </option>                                    <?php } ?>                                </select>                            </div>                        </div></form><form method="post" action="<?php echo base_url();?>index.php?admin/graph"><div class="form-group"><input type="hidden" name="chart_type" value="<?php if(!empty($chart_type)){ echo $chart_type;} else {}?>"/><input type="hidden" name="city_id" value="<?php if(!empty($city_id)){ echo $city_id;} else {}?>"/>                                                     <div class="col-sm-4">                                <select name="speciality_id" id="speciality_id" onchange='if(this.value != 0) { this.form.submit(); }' class="form-control select2">                                    <option value=""><?php echo get_phrase('select_speciality'); ?></option>                                    <?php foreach ($speciality_info as $row3) { ?>                                        <option value="<?php echo $row3['speciality_id']; ?>" <?php if(!empty($speciality_id) && ($row3['speciality_id']== $speciality_id)) { echo 'selected';}else{}?> >                                            <?php echo $row3['name']; ?>                                        </option>                                    <?php } ?>                                </select>                            </div>                        </div></form><form method="post" action="<?php echo base_url();?>index.php?admin/graph"><div class="form-group"><input type="hidden" name="city_id" value="<?php if(!empty($city_id)){ echo $city_id;} else {}?>"/><input type="hidden" name="speciality_id" value="<?php if(!empty($speciality_id)){ echo $speciality_id;} else {}?>"/>                           <div class="col-sm-4">                                <select name="chart_type" id="chart_type" onchange='if(this.value != 0) { this.form.submit(); }' class="form-control select2">                                    <option value=""><?php echo get_phrase('select_type'); ?></option>                                                                       <option value="1" <?php if(!empty($chart_type) && (1== $chart_type)) { echo 'selected';}else{}?> >Column Chart</option>								   <option value="2" <?php if(!empty($chart_type) && (2== $chart_type)) { echo 'selected';}else{}?> >Pie Chart</option>                                                                  </select>                            </div>                        </div></form><div style="clear:both;"></div><hr><br><div id="invoice_print"><?php /*if(empty($city_id) && empty($speciality_id)){ echo $this->crud_model->get_doctors_data();}	elseif(!empty($city_id) && empty($speciality_id)){ echo $this->crud_model->get_city_doctors_data($city_id); }	elseif(empty($city_id) && !empty($speciality_id)){ echo $this->crud_model->get_speciality_doctors_data($speciality_id); }	else{ echo $this->crud_model->get_speciality_city_doctors_data($city_id,$speciality_id); }*/	?><body>    <div id="chart_div" style="width: 100%; height: 500px;"></div>  </body>  <br>     <a onClick="PrintElem('invoice_print')" class="btn btn-primary btn-icon icon-left hidden-print">        Print Analytics        <i class="entypo-doc-text"></i>    </a></div><script type="text/javascript" src="<?php echo base_url();?>assets/js/loader.js"></script>    <script type="text/javascript">      google.charts.load('current', {'packages':['corechart']});      google.charts.setOnLoadCallback(drawChart);      function drawChart() {        var data = google.visualization.arrayToDataTable(                   <?php if(empty($city_id) && empty($speciality_id)){ echo $this->crud_model->get_doctors_data();}	elseif(!empty($city_id) && empty($speciality_id)){ echo $this->crud_model->get_city_doctors_data($city_id); }	elseif(empty($city_id) && !empty($speciality_id)){ echo $this->crud_model->get_speciality_doctors_data($speciality_id); }	else{ echo $this->crud_model->get_speciality_city_doctors_data($city_id,$speciality_id); } ?>  		         );        var options = {          title: 'Doctor Details',          hAxis: {title: '<?php if(empty($speciality_id)){ echo "Speciality"; } else {echo "City";}?>',  titleTextStyle: {color: '#333'}},          vAxis: {minValue: 0}        };       <?php if(!empty($chart_type) && $chart_type==1){?>        var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));		<?php } elseif(!empty($chart_type) && $chart_type==2){			?>			var chart = new google.visualization.PieChart(document.getElementById('chart_div'));			<?php		}else{ ?>			var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));		<?php } ?>				chart.draw(data, options);      }	  	  function PrintElem(el){    	var restorepage = document.body.innerHTML;	var printcontent = document.getElementById(el).innerHTML;	document.body.innerHTML = printcontent;        	window.print();        	document.body.innerHTML = restorepage;        window.location.reload();      // return true;}$('#city_id').click(function(){		$city_id=$('#city_id').val();		//alert($city_id);				/*$.post('<?php echo base_url();?>index.php?admin/get_city_doctors/', { city_id: $city_id }, function(data){				if(data)				{   				d = json_decode(data);				alert(d);									}			  			});		*/			});</script>